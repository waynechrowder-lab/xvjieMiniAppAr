page, .page {
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: relative;
  display: flex;
  background-color: #f7f3e9;
}

/* 地图容器本身在最底层 */
.map-container {
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  z-index: 0;
}

/* 地图 world：被 translate + scale 的那个 */
.map-inner {
  position: absolute;
  left: 0;
  top: 0;
  /* 这两个按你的地图分辨率来，这里用你之前的 2048x1365 */
  width: 2048rpx;
  height: 1365rpx;

  transform-origin: 0 0;  /* ★ 重要：以左上角为原点做数学变换 */
}

/* 顶部 header 浮在地图上 */
.header {
  position: fixed;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 100rpx 15rpx;
  z-index: 10;
}

/* 背景图铺满整个 header */
.header-bg {
  position: absolute;
  left: 0;
  top: 0;
  width: 200%;
  height: 150%;          /* 占满 20vh 的容器 */
  display: block;
}

.logo {
  height: 100rpx;
  z-index: 1;
}

/* 分类条 */
.category-bar {
  position: fixed;
  left: 0;
  right: 0;
  top: 200rpx;      /* 根据 header 高度微调 */
  display: flex;
  justify-content: center;
  padding: 16rpx 0 24rpx;
  z-index: 10;
}

.category-item {
  width: 130rpx;
  height: 130rpx;
  margin: 0 10rpx;
  border-radius: 16rpx;
  background-color: rgba(255,255,255,0);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  font-size: 24rpx;
  text-align: center;
}

.category-img {
  width: 100%;
  height: 100%;
}

/* 弹窗遮罩 */
/* 弹窗遮罩：竖向居中偏上 */
.popup-mask {
  position: fixed;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  background-color: rgba(0,0,0,0.65);
  z-index: 99;
  display: flex;
  justify-content: center;
  align-items: flex-start;  /* 让弹窗靠上 */
  padding-top: 420rpx;      /* 往下一点，看着更居中偏上 */
}
/* 弹窗本体：上下结构 */
.popup {
  position: relative;
  width: 92%;
  min-height: 100rpx;
  height: 65%;
  border-radius: 24rpx;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}
/* 背景图铺满整个 popup，放在最底层 */
.popup-bg {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  z-index: -1;
}
/* 标题行固定高度 */
/* 标题行跟图片之间留一点间距 */
.popup-header {
  margin-top: 70rpx;
  position: relative;      /* 必须加：让子元素 absolute 以它为参考 */
  flex-shrink: 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.popup-title {
  margin-top: 30rpx;
  position: absolute;       /* 绝对定位 */
  left: 50%;
  transform: translateX(-50%);  /* 水平居中 */
  font-size: 40rpx;
  font-weight: 600;
  color: #664812;
}

.popup-close {
  position: absolute;
  right: -10rpx;        /* 可以调整，比如 20rpx */
  top: -20rpx;          /* 可以调整，比如 20rpx */
  font-size: 45rpx;
  padding: 20rpx;     /* 点击区域更大更好点 */
  color: rgba(34, 34, 34, 0);
}

/* 封面区域：左右和标题对齐，固定高度做裁剪 */
.popup-cover {
  flex-shrink: 0;
  width: 100%;
  height: 300rpx;          /* 325:132 的比例，高度你可以微调 */
  padding: 0 45rpx;        /* ★ 和标题左右对齐 */
  box-sizing: border-box;
  margin-bottom: 100rpx;
}

/* 封面图：铺满这个区域，居中裁剪 + 圆角 */
.popup-cover-img {
  width: 100%;
  height: 100%;
  display: block;
}

/* 文本区域：占据中间、可滚动 */
.popup-content {
  width: 95%;
  margin-top: 40rpx;
  margin-left: 20rpx;
  height: 210rpx;
  padding: 24rpx 50rpx;
  box-sizing: border-box;
}

::-webkit-scrollbar {
  width: 10px;
  height: 10px;
  color:#ffffff00;
}

.popup-desc {
  font-size: 26rpx;
  line-height: 1.4;
  color: #664812;
}

/* 底部按钮：固定在最下 */
/* 按钮所在的一行：负责右对齐 */
.popup-btn-row {
  position: absolute;
  bottom: 60rpx;       /* ★ 按钮向上移动的关键！想多少就是多少 */
  left: 0;
  width: 100%;
  display: flex;
  justify-content: center;  /* 居中按钮 */
  z-index: 5;               /* 在内容上方 */
  pointer-events: auto;
}

/* 伪按钮本体：一个靠右的小胶囊 */
.popup-btn {
  opacity: 0;
  display: inline-flex;      /* 内部文字水平垂直居中 */
  align-items: center;
  justify-content: center;
  width: 250rpx;             /* 可自己调宽度 */
  height: 80rpx;
  border-radius: 999rpx;
  background-color: #222;
  color: #fff;
  font-size: 28rpx;
  z-index: 2;
}
/* 底部 Tab */
.tabbar {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  /* background-color: rgba(124, 38, 38); */
  display: flex;
  justify-content: space-around;
  align-items: flex-end;
  /* box-shadow: 0 -4rpx 12rpx rgba(0,0,0,0.06); */
  z-index: 98;
  background-image: url("https://shanghai-mashu-wxapp.oss-cn-shanghai.aliyuncs.com/ui/zhengding/main/bottom.png");
  background-size: contain;
  width: 825rpx;
  height: 312rpx;
  transform: translate(-4%, 9%);
}

/* 下面 .tab-item / .tab-icon / .tab-label 按你原来的写就行 */

/* 每个 tab 按钮：垂直布局（icon 上、文字下） */
.tab-item {
  opacity: 0;
  height: 200rpx;
  width: 150rpx;
  margin-bottom: 80rpx;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
}

/* icon：比底部区域更高一点，用 translateY 往上提 */
.tab-icon {
  width: 100rpx;                            /* 自己调整尺寸 */
  height: 100rpx;
  margin-top: 0rpx;
  /* transform: translateY(-12rpx);           */
}

/* 文字标签 */
.tab-label {
  font-size: 28rpx;
  margin-top: 0rpx;
  color: #ffad5b;
}

/* 选中态：改文字颜色，也可以再加别的效果 */
.tab-item-active .tab-label {
  color: #ffffff;
}

/* ==== 新地图引擎：容器 & 切片 ==== */

/* 整屏地图容器 */
.map-container {
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
}

/* 兜底整图 */
.map-img {
  width: 100%;
  height: 100%;
  display: block;
}

/* 高清切片 */
.map-tile {
  position: absolute;
  display: block;
  transition: opacity 0.3s;   /* 加一点淡入动画 */
}

/* 点位按钮（如果你原来就有 .poi / .poi-label / .poi-pin，可以保留原来的） */
.poi {
  position: absolute;
  transform-origin: 50% 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* 主体：宽度固定，高度由文字 + padding 决定 */
.poi-body {
  position: relative;
  width: 60rpx;              /* 牌子的固定宽度，根据你的图调 */
  min-height: 150rpx;    /* 最小高度，自己调，比如 100~140rpx */
  padding: 40rpx 0 80rpx 0;  /* 上下预留文字空间，决定“红牌子”的头尾 */
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
}

.poi-body-not-arrived{
  min-height: 120rpx; 
  padding: 40rpx 0 30rpx 0;    /* arrived === 2 时的 padding（按你想要的数值改） */
}

/* 背景图：完全跟随 poi-body 的大小，拉伸不裁剪 */
.poi-bg {
  position: absolute;
  inset: 0;                  /* 等价于 top:0; right:0; bottom:0; left:0 */
  width: 105%;
  height: 100%;
  z-index: 0;
}

/* 文本在最上层，竖排一列 */
.poi-label {
  color: #fff;
  font-size: 24rpx;
  display: flex;
  flex-direction: column;    /* 你已经按字拆开了，所以竖向排列即可 */
  align-items: center;
  z-index: 1;
}

.poi-label text {
  display: block;
  line-height: 1.2;
}

.poi-label-text-not {
  display: block;
  line-height: 1.2;
  color: rgb(59, 26, 6);
}

/* 小圆点：只负责下面那个点 */
.poi-pin {
  width: 54rpx;
  height: 62rpx;
  margin-top: -60rpx;
  z-index: 1;
}
.poi-point{
  width: 100%;
  height: 100%;
}
